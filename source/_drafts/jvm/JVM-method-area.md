---
title: JVM-method-area
date: 2020-06-10 15:02:31
tags:
categories:
thumbnail:
---



## 方法区

<!--more-->

 方法区存着类的信息，常量和静态变量，即类被编译后的数据。

方法区用于存放程序的类元数据信息。方法区与堆空间类似，它也是被 JVM 中所有的线程共享的。方法区主要保存的信息是类的元数据。方法区中最为重要的是类的`类型信息`、`常量池`、`字段信息`、`方法信息`。

1. 类型信息:
   1. 类的完整名称、
   2. 父类的完整名称、
   3. 类型修饰符
   4. 类型的直接接口类表；
2. 常量池(这个类方法、字段等信息所引用的常量信息)
   1. 字面量
      1. 文本字符串
      2. 常量(final修饰)等
   2. 符号引用
      1. 类和接口的全限定名
      2. 字段的名称和全限定名
      3. 方法的名称和全限定名
3. 字段信息
   1. 字段名称
   2. 字段类型
   3. 字段修饰符；
4. 方法信息
   1. 方法名称
   2. 返回类型
   3. 方法参数
   4. 方法修饰符
   5. 方法字节码
   6. 操作数栈
   7. 方法栈帧的局部变量区大小
   8. 异常表

总之，方法区内保持的信息大部分来自于 class 文件，是 Java 应用程序运行必不可少的重要数据。



## 运行时常量池(方法区的一部分)

当Java文件被编译成class文件之后，也就是会生成我上面所说的class常量池，那么运行时常量池又是什么时候产生的呢？

JVM在执行某个类的时候，必须经过**加载、连接、初始化**，而连接又包括验证、准备、解析三个阶段。而当类加载到内存中后，**JVM就会将class常量池中的内容存放到运行时常量池中**。在上面我也说了，Class常量池中存的是**字面量**和**符号引用**，也就是说他们存的并不是对象的实例，而是对象的符号引用值。而经过解析（resolve）之后，也就是把符号引用替换为直接引用, 与全局常量池中的引用值保持一致。